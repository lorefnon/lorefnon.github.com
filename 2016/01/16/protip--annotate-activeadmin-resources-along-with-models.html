<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!--[if lt IE 7]> <html class="no-js lt-ie9 lt-ie8 lt-ie7" lang="en"> <![endif]-->
<!--[if IE 7]> <html class="no-js lt-ie9 lt-ie8" lang="en"> <![endif]-->
<!--[if IE 8]> <html class="no-js lt-ie9" lang="en"> <![endif]-->
<!--[if gt IE 8]> ><! <![endif]-->
<html lang="en" class="">
  <head>
    <meta charset="utf-8">
    <title>Tip: Annotate ActiveAdmin resources along with models |  Code.Art.Web</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">

    

    <link rel="canonical" href="http://lorefnon.me/2016/01/16/protip--annotate-activeadmin-resources-along-with-models.html">
    <meta property="twitter:creator" content="@lorefnon">
    <meta property="og:title" content="@lorefnon">
    <meta property="og:type" content="blog">
    <meta poperty="og:url" content="http://lorefnon.me">
    <meta property="og:site_name" content="Code.Art.Web">
    <meta property="og:fb:app_id">
    <meta property="og:description" content="">
    <link rel="alternate" type="application/rss+xml" href="http://lorefnon.me/feed.xml"/>
    <link rel="stylesheet" media="screen" type="text/css" href="/assets/stylesheets/reset.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="/assets/stylesheets/responsive.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="/assets/stylesheets/github.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="/assets/stylesheets/minimal_lightbox.css"/>
    <link rel="stylesheet" media="screen" type="text/css" href="/assets/stylesheets/styles.css"/>
    <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
    <link href="//fonts.googleapis.com/css?family=Raleway" rel='stylesheet' type='text/css'>
    <script>
  this.top.location !== this.location && (this.top.location = this.location);
</script>

  </head>
  <body style="zoom: 1;">
    <div class="main-container">

      <div class="mlogotype is-uppercase">
        <a href="http://lorefnon.me">Code.Art.Web</a>
      </div>

      <a href="http://lorefnon.me" class="home_logotype_link">
        <h1 class="tag">Code.Art.Web</h1>
      </a>

      <div class="header-container detail-view">
        <header class="main-header">
          <figure class="avatar">
            <a href="http://lorefnon.me"
            style="background-image: url();">Profile Picture</a>
          </figure>
          <h1 class="profile-name is-uppercase">
            <a href="http://lorefnon.me">Lorefnon</a>
          </h1>
        </header>
      </div>

      <div class="posts-container detail-view">
        <article class="post detail-view" id="">
          <h1 class="title"><a href="#">Tip: Annotate ActiveAdmin resources along with models</a></h1>
          <a href="#" class="anchor-icon time-wrapper">
            <i class="fa fa-anchor"></i>
            <time>Jan 16, 2016</time>
          </a>

          

          

          <p><a href="https://github.com/ctran/annotate_models">Annotate</a> is a very useful utility for annotating schema information in Rails models. The gem prepends (or appends, as per your <a href="https://github.com/ctran/annotate_models#options">configuration</a>) a summarized information about the table schema in each model file as comments) - saving multiple roundtrips to the <code>schema.rb</code> file during coding.</p>

<p>For Example:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="c1"># == Schema Information</span>
<span class="c1">#</span>
<span class="c1"># Table name: roles</span>
<span class="c1">#</span>
<span class="c1">#  id            :integer          not null, primary key</span>
<span class="c1">#  name          :string</span>
<span class="c1">#  resource_id   :integer</span>
<span class="c1">#  resource_type :string</span>
<span class="c1">#  created_at    :datetime</span>
<span class="c1">#  updated_at    :datetime</span>
<span class="c1">#</span>
<span class="c1"># Indexes</span>
<span class="c1">#</span>
<span class="c1">#  index_roles_on_name                                    (name)</span>
<span class="c1">#  index_roles_on_name_and_resource_type_and_resource_id  (name,resource_type,resource_id)</span>
<span class="c1">#</span>
</code></pre></div>
<p>However while working with admin interfaces powered by <a href="http://activeadmin.info">ActiveAdmin</a> I have often found it convenient to have the model schema annotations available right in the <a href="http://activeadmin.info/docs/2-resource-customization.html">ActiveAdmin resource files</a>. There is a very simple way to achieve that:</p>

<p>The rake task <a href="https://github.com/ctran/annotate_models#configuration-in-rails">generated</a> by Annotate (<code>lib/tasks/auto_annotate_models.rake</code>) has option to specify the model directory. This is primarily intended for projects with non standard directory configuration. As it so happens we can specify multiple directories separated by commas.</p>

<p>So taking advantage of the fact that our ActiveAdmin resource files are conventionally named same as the models, we can just add the admin directory to the list of model directories:</p>
<div class="highlight"><pre><code class="ruby language-ruby" data-lang="ruby"><span class="k">if</span> <span class="no">Rails</span><span class="o">.</span><span class="n">env</span><span class="o">.</span><span class="n">development?</span>
  <span class="n">task</span> <span class="ss">:set_annotation_options</span> <span class="k">do</span>
    <span class="c1"># You can override any of these by setting an environment variable of the</span>
    <span class="c1"># same name.</span>
    <span class="no">Annotate</span><span class="o">.</span><span class="n">set_defaults</span><span class="p">(</span>
      <span class="s1">'model_dir'</span>               <span class="o">=&gt;</span> <span class="s1">'app/models,app/admin'</span><span class="p">,</span>
      <span class="c1"># ... other configuration options</span>
    <span class="p">)</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre></div>
<p>Next time annotate is run, either manually invoked or through migration hooks, our ActiveAdmin resource files with annotated along with our model files.</p>

<p>If you are not using the generated rake file, this approach of course works with the <code>--model-dir</code> command line option as well.</p>


<footer class="group">
  <p>
    
    
    
      
    
  </p>
</footer>
<div id="disqus_thread"></div>
<script type="text/javascript">
  (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//lorefnon-blog.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript" class="disqus-link">comments powered by Disqus.</a>
</noscript>
<a href="http://disqus.com" class="dsq-brlink disqus-link">comments powered by <span class="logo-disqus">Disqus</span></a>



        </article>
      </div>

      <div class="line hide-text">Separator line</div>

      <!-- Next article preview -->
      <div class="next-article" style="display: none;">
        <a href="#">
          <p class="read-next tag is-uppercase">Read this next:</p>
          <p class="next-article__title">Protocol and Language</p>
          <div class="next-article__content">
            <p>This is the second part of my series on protocol. The first part contained a lot of background information, but now we’re ready to get into what Protocol actually is. I live in a pretty unique place, the Farmhouse. It’s a... <span>Continue…</span></p>
          </div>
        </a>
      </div>
      <!-- Finish / Feature on process-->

      <div class="line hide-text">Separator line</div>

      <div class="foot_logo">
        <a href="http://lorefnon.me"><span class="logo"></span></a>
      </div>

      <div class="foot_logo right">
        <a href="/"><span class="link">Full Blog >></span></a>
      </div>

      <div class="line"></div>

<div class="foot_userbar">
  <div href="#" class="bottom_tagline">
    <span>Lorefnon</span>
    <br><br>
    <p> Full stack web developer and polyglot programmer with strong interest in dynamic languages, web application development and user experience design. </p>
    <br>
    <p> Strong believer in agile methodologies, behaviour driven development and efficacy of open source technologies.</p>
    <br>
  </div>
  <div class="profile-links-container">
  <a href="#" class="bottom_tagline"><span> You can reach me through :</span></h2>
  <br><br>
  <ul class="profile-links">
    <li class="twitter">
      <a href="http://twitter.com/lorefnon" target="_blank">
        <span>Twitter</span>
      </a>
    </li>
    <li class="linkedin">
      <a href="https://in.linkedin.com/in/gaurab-paul-a2472921" target="_blank">
        <span>Linkedin</span>
      </a>
    </li>
    <li class="github">
      <a href="https://github.com/lorefnon" target="_blank">
        <span>Github</span>
      </a>
    </li>
    <li class="github">
      <a href="mailto:lorefnon@gmail.com" target="_blank">
        <span>Email</span>
      </a>
    </li>
  </ul>

  </div>
</div>
<div class="line"></div>
<div class="foot_userbar">
  <p>&copy; 2013 - 2015 Gaurab Paul </p>
<br/>
<p>Code licensed under the
  <a href="http://opensource.org/licenses/MIT" target="_blank">The
    MIT License</a>. Content and Artwork licensed under <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA</a>.
</p>
<br/>
<p>
  The opinions expressed herein are my personal viewpoints  and may
  not be taken as professional recommendations from any of my previous or
  current employers.
</p>
<br/>
<p>
  Site is powered by <a href="http://jekyllrb.com/">Jekyll</a> and graciously hosted by <a href="https://github.com">Github</a>
</p>
<br/>
<br/>

</div>

    </div>

    <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-47274059-1']);
  _gaq.push(['_setDomainName', 'lorefnon.me']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>

    <script src="/assets/javascripts/post.js"></script>
  </body>
</html>
